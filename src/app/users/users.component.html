<div class="user-management">
    <div class="form-row">
        <div class="form-group col-md-6">
            <div class="header-container">
                <i class="fa-solid fa-users header-icon"></i>
                <div>
                    <h2>User Management</h2>
                    <p class="description">Manage team access and permissions</p>
                </div>
            </div>
        </div>

        <!-- Tabs Section -->
         <div class="form-row col-md-6">
            <div class="nav-card">
                <nav>
                    <button (click)="setActiveTab('users')" [class.active]="activeTab === 'users'"><i class="fa-solid fa-user-group"></i> Users</button>
                    <button (click)="setActiveTab('addEditUser')" [class.active]="activeTab === 'addEditUser'"><i class="fa-solid fa-user-plus"></i> Add/Edit User</button>
                    <button (click)="setActiveTab('roles')" [class.active]="activeTab === 'roles'"><i class="fa-solid fa-shield"></i> Roles</button>
                    <button (click)="setActiveTab('designations')" [class.active]="activeTab === 'designations'"><i class="fa-solid fa-id-card"></i> Designations</button>
                    <button (click)="setActiveTab('userLog')" [class.active]="activeTab === 'userLog'"><i class="fa-solid fa-rotate-left"></i> User Log</button>
                </nav>
            </div>
        </div>
    </div>

    <!-- Users List Section -->
    <div class="users-card" *ngIf="activeTab === 'users'">
        <div class="users-header">
            <h3>Users</h3>
            <button class="new-user-btn" (click)="addUser()"><i class="fa-solid fa-plus"></i>&nbsp; New User</button>
        </div>

        <!-- Table Header -->
        <div class="users-table">
            <div class="users-table-header">
                <div class="column">Name</div>
                <div class="column">Username</div>
                <div class="column">Role</div>
                <div class="column">Designation</div>
                <div class="column">Created At</div>
                <div class="column actions-header">Actions</div>
            </div>

            <!-- Table Body -->
            <div class="table-container">
                <div class="user-row" *ngFor="let user of users">
                    <div class="column user-info">
                        <img [src]="user.image" alt="User Image" class="user-avatar" />
                        <div>
                            <strong>{{ user.name }}</strong>
                            <p>{{ user.email }}</p>
                        </div>
                    </div>
                    <div class="column">{{ user.username }}</div>
                    <div class="column">{{ user.role }}</div>
                    <div class="column">{{ user.designation }}</div>
                    <div class="column">{{ user.created }}</div>
                    <div class="column actions">
                        <div class="icon-container">
                            <i class="fa-solid fa-pen edit-icon tooltip-icon" (click)="editUser(user)"></i>
                            <span class="tooltip-text">Edit User</span>
                        </div>
                        <div class="icon-container">
                            <i class="fa-solid fa-trash delete-icon" (click)="deleteUser(user.id)"></i>
                            <span class="tooltip-text">Delete User</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit User Section -->
    <div *ngIf="activeTab === 'addEditUser'" class="user-form-container">
        <div class="form-header">
            <h3>{{ isEditing ? 'Edit User' : 'Add User' }}</h3>
            <button type="button" class="back-button" (click)="goBack()"><i class="fa-solid fa-backward"></i>&nbsp; Back to Users</button>
        </div>

        <form (submit)="saveUser()" class="user-form">
            <!-- Name & Username -->
            <div class="form-row">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" [(ngModel)]="currentUser.name" name="name" placeholder="Enter full name" required />
                </div>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" [(ngModel)]="currentUser.username" name="username" placeholder="Enter username" required />
                </div>
            </div>

            <!-- Email & Role -->
            <div class="form-row">
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" [(ngModel)]="currentUser.email" name="email" placeholder="Enter email address" required />
                </div>
                <div class="form-group">
                    <label>Role</label>
                    <select [(ngModel)]="currentUser.role" name="role">
                        <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
                    </select>
                </div>
            </div>

            <!-- Designation & Password -->
            <div class="form-row">
                <div class="form-group">
                    <label>Designation</label>
                    <input type="text" [(ngModel)]="currentUser.designation" name="designation" placeholder="Enter designation" required />
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" [(ngModel)]="currentUser.password" name="password" placeholder="Enter password" required />
                </div>
            </div>

            <!-- Confirm Password -->
            <div class="form-row">
                <div class="form-group">
                    <label>Confirm Password</label>
                    <input type="password" [(ngModel)]="currentUser.confirmPassword" name="confirmPassword" placeholder="Confirm password" required />
                </div>
                <div class="form-group">
                    <!-- Save Button -->
                    <div class="form-footer">
                        <button type="submit" class="save-button"><i class="fa-solid fa-floppy-disk"></i>&nbsp; Save User</button>
                    </div>
                </div>
            </div>

            
            
        </form>
    </div>


    <!-- Roles -->
    <div *ngIf="activeTab === 'roles'">
        <div class="roles-container">
            <!-- Left Side: Role List -->
            <div class="roles-list">
                <h2><i class="icon-shield"></i> Roles</h2>
                <div class="role-card" *ngFor="let role of roles">
                    <div class="role-info">
                        <h3>{{ role.name }}</h3>
                        <p>{{ role.description }}</p>
                    </div>
                    <button class="delete-btn" (click)="deleteRole(role)">
                        <i class="icon-trash"></i>
                    </button>
                </div>
            </div>
        
            <!-- Right Side: Add New Role -->
            <div class="add-role-form">
                <h2>Add Role</h2>
                <form (submit)="addRole()">
                    <label for="roleName">Role Name</label>
                    <input type="text" id="roleName" [(ngModel)]="newRole.name" placeholder="Enter role name" required />
        
                    <label for="roleDescription">Description</label>
                    <input type="text" id="roleDescription" [(ngModel)]="newRole.description" placeholder="Enter role description" required />
        
                    <div class="button-group">
                        <button type="button" class="cancel-btn" (click)="resetForm()">Cancel</button>
                        <button type="submit" class="add-btn">Add Role</button>
                    </div>
                </form>
            </div>
        </div>        
    </div>

    <!-- Designations -->
    <div *ngIf="activeTab === 'designations'">
        <div class="designation-container">
            <!-- Left Side: Designation List -->
            <div class="designation-list">
                <h2><i class="icon-briefcase"></i> Designations</h2>
                <div class="designation-card" *ngFor="let designation of designations">
                    <div class="designation-info">
                        <h3>{{ designation.title }}</h3>
                        <p>{{ designation.description }}</p>
                    </div>
                    <button class="delete-btn" (click)="deleteDesignation(designation)">
                        <i class="icon-trash"></i>
                    </button>
                </div>
            </div>
        
            <!-- Right Side: Add New Designation -->
            <div class="add-designation-form">
                <h2>Add Designation</h2>
                <form (submit)="addDesignation()">
                    <label for="designationTitle">Title</label>
                    <input type="text" id="designationTitle" [(ngModel)]="newDesignation.title" placeholder="Enter designation title" required />
        
                    <label for="designationDescription">Description</label>
                    <input type="text" id="designationDescription" [(ngModel)]="newDesignation.description" placeholder="Enter description" required />
        
                    <div class="button-group">
                        <button type="button" class="cancel-btn" (click)="resetForm()">Cancel</button>
                        <button type="submit" class="add-btn">Add Designation</button>
                    </div>
                </form>
            </div>
        </div>        
    </div>

    <!-- User Log -->
    <div *ngIf="activeTab === 'userLog'">
        <p>User Log Works</p>
    </div>
</div>
